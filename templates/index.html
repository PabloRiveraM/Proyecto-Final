<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Metadatos básicos -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión Académica</title>
    <!-- Hoja de estilo principal -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <!-- Cabecera con navegación -->
    <header>
        <!-- Título principal del sistema -->
        <div class="header-title">
            <h1>Sistema de Gestión Académica</h1>
            <p>Bienvenido, {{ nombre_usuario }} | Rol: {{ rol_usuario }}</p>
        </div>
        
        <!-- Menú de navegación principal -->
        <nav>
            <ul>
                <!-- Enlaces para cambiar entre secciones -->
                <li><a href="#" onclick="mostrarSeccion('estudiantes'); return false;">Estudiantes</a></li>
                {% if rol_usuario != 'catedratico' %}
                <li><a href="#" onclick="mostrarSeccion('profesores'); return false;">Profesores</a></li>
                <li><a href="#" onclick="mostrarSeccion('cursos'); return false;">Cursos</a></li>
                <li><a href="#" onclick="mostrarSeccion('asignaciones'); return false;">Asignaciones</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <!-- Contenido principal -->
    <main>
        <!-- Sección de Estudiantes -->
        <section id="estudiantes" class="seccion-contenido">
            {% if rol_usuario != 'estudiante' %}
            <!-- Formulario para agregar estudiantes (visible solo para administradores y profesores) -->
            <h2>Gestión de Estudiantes</h2>
            <form id="form-estudiante">
                <!-- Campos del formulario con validación de patrones -->
                <div class="form-group">
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" title="Solo se permiten letras y espacios" required>
                </div>
                <div class="form-group">
                    <label for="nombre_contacto">Nombre del contacto:</label>
                    <input type="text" id="nombre_contacto" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" title="Solo se permiten letras y espacios" required>
                </div>
                <div class="form-group">
                    <label for="relacion_contacto">Relación con el contacto:</label>
                    <input type="text" id="relacion_contacto" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" title="Solo se permiten letras y espacios" required>
                </div>
                <div class="form-group">
                    <label for="telefono_contacto">Teléfono del contacto:</label>
                    <input type="tel" id="telefono_contacto" pattern="[0-9]{8}" title="Ingrese un número de teléfono válido de 8 dígitos" required>
                </div>
                <div class="form-group">
                    <label for="medicos">Datos médicos:</label>
                    <textarea id="medicos"></textarea>
                </div>
                <div class="form-group">
                    <label for="academicos">Datos académicos:</label>
                    <textarea id="academicos"></textarea>
                </div>
                <button type="submit">Agregar Estudiante</button>
            </form>
            {% endif %}
            
            <!-- Tabla de estudiantes (visible para todos los roles) -->
            <h2>Estudiantes Registrados</h2>
            <div class="lista-estudiantes">
                <table id="tabla-estudiantes">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Nombre Contacto</th>
                            <th>Relación</th>
                            <th>Teléfono</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se cargarán los estudiantes dinámicamente mediante JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Sección de Profesores -->
        <section id="profesores" class="seccion-contenido">
            {% if rol_usuario != 'estudiante' %}
            <!-- Formulario para agregar profesores -->
            <h2>Gestión de Profesores</h2>
            <form id="form-profesor">
                <div class="form-group">
                    <label for="nombre-profesor">Nombre:</label>
                    <input type="text" id="nombre-profesor" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" title="Solo se permiten letras y espacios" required>
                </div>
                <div class="form-group">
                    <label for="contacto-profesor">Información de Contacto:</label>
                    <input type="tel" id="contacto-profesor" pattern="[0-9]{8}" title="Ingrese un número de teléfono válido de 8 dígitos" required>
                </div>
                <button type="submit">Agregar Profesor</button>
            </form>
            {% endif %}
            
            <!-- Tabla de profesores -->
            <h2>Profesores Registrados</h2>
            <div class="lista-profesores">
                <table id="tabla-profesores">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Contacto</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se cargarán los profesores dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Sección de Cursos -->
        <section id="cursos" class="seccion-contenido">
            {% if rol_usuario != 'estudiante' %}
            <!-- Formulario para agregar cursos -->
            <h2>Gestión de Cursos</h2>
            <form id="form-curso">
                <div class="form-group">
                    <label for="nombre-curso">Nombre del Curso:</label>
                    <input type="text" id="nombre-curso" required>
                </div>
                <div class="form-group">
                    <label for="descripcion">Descripción:</label>
                    <textarea id="descripcion"></textarea>
                </div>
                <div class="form-group">
                    <label for="profesor-curso">Profesor:</label>
                    <select id="profesor-curso" required>
                        <!-- Aquí se cargarán los profesores disponibles mediante JavaScript -->
                    </select>
                </div>
                <button type="submit">Agregar Curso</button>
            </form>
            {% endif %}
            
            <!-- Tabla de cursos -->
            <h2>Cursos Disponibles</h2>
            <div class="lista-cursos">
                <table id="tabla-cursos">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Descripción</th>
                            <th>Profesor</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se cargarán los cursos dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Sección de Asignaciones -->
        <section id="asignaciones" class="seccion-contenido">
            {% if rol_usuario != 'estudiante' %}
            <!-- Formulario para asignar cursos a estudiantes -->
            <h2>Asignación de Cursos a Estudiantes</h2>
            <form id="form-asignacion">
                <div class="form-group">
                    <label for="estudiante-asignacion">Estudiante:</label>
                    <select id="estudiante-asignacion" required>
                        <!-- Aquí se cargarán los estudiantes disponibles -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="curso-asignacion">Curso:</label>
                    <select id="curso-asignacion" required>
                        <!-- Aquí se cargarán los cursos disponibles -->
                    </select>
                </div>
                <button type="submit">Asignar Curso</button>
            </form>
            {% endif %}
            
            <!-- Tabla de asignaciones -->
            <h2>Asignaciones Actuales</h2>
            <div class="lista-asignaciones">
                <table id="tabla-asignaciones">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Estudiante</th>
                            <th>Curso</th>
                            <th>Profesor</th>
                            <th>Fecha</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se cargarán las asignaciones dinámicamente -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Pie de página -->
    <footer>
        <p>Sistema de Gestión Académica - Desarrollado con Python y PostgreSQL</p>
    </footer>

    <!-- Modal para mensajes informativos -->
    <div id="modal-mensaje" class="modal">
        <div class="modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <div class="modal-header">
                <h3 id="modal-titulo">Título del Modal</h3>
            </div>
            <div class="modal-body">
                <p id="modal-texto">Texto del mensaje</p>
            </div>
            <div class="modal-footer">
                <button id="modal-btn-aceptar" class="btn-primario">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal para confirmaciones de acciones críticas -->
    <div id="modal-confirmacion" class="modal">
        <div class="modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <div class="modal-header">
                <h3 id="modal-confirmacion-titulo">Confirmar Acción</h3>
            </div>
            <div class="modal-body">
                <p id="modal-confirmacion-texto">¿Estás seguro de que deseas realizar esta acción?</p>
            </div>
            <div class="modal-footer">
                <button id="modal-btn-cancelar" class="btn-secundario">Cancelar</button>
                <button id="modal-btn-confirmar" class="btn-peligro">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Script principal para la funcionalidad de la aplicación -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>